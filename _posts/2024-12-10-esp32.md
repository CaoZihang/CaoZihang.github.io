---
layout:       post
title:        "ESP32 DevKit V4复刻"
author:       "Cao Zihang"
header-style: text
catalog:      true
status:		  Done
tags:
    - 嵌入式
    - PCB
    - ESP32
---

# ESP32 DevKit V4复刻

> 基于乐鑫官方ESP32 DevKit V4方案进行复刻。
>
> 将原方案使用的Micro USB调整为Type C接口。
>
> 将原方案使用CP2102芯片进行USB-UART调整为使用CH340c。
>
> 保持原方案使用AMS1117进行降压。

## V1.0

> 为便于新手焊接，V1.0方案将原方案0402和0603封装的元器件调整为0805封装。
>
> V1.0 PCB布线存在较大优化空间。

## 电路图

![Schematic](https://img.caozihang.com/img/202412092329066.png)

## PCB

 ![pcbb](https://img.caozihang.com/img/202412092332160.png)


## 实物模型
![3D模型](https://img.caozihang.com/img/202412092329800.png)

## 要点与分析

### 天线与定位孔

ESP32硬件设计指南中指出，ESP32天线应保持15mm的净空区域，“若天线区域下方有底板，建议切割掉以尽可能减少底板板材对PCB天线的影响。设计整机设计时，请注意考虑外壳对天线的影响。”

![image-20241209234434830](https://img.caozihang.com/img/202412092355547.png)

但是由于ESP32最小系统开发板普遍宽度仅为30mm~40mm，因此不便于将天线方向的定位孔设置在与天线水平的方向上。

目前包括官方DevKit V4在内的大量开源方案均没有添加定位孔，不利于安装，市面上的还有一些开发板则选择不对天线进行净空。

若将定位孔放置在与芯片引脚水平的方向上，由于芯片引脚比较密集，对PCB布线会造成挑战。

### 芯片3.3V引脚滤波电容

官方方案将该引脚对应的滤波电容放置到芯片下方，离3V3引脚距离较远，我不确定这个距离是否妥当。

V1.0中将该滤波电容放置在3V3引脚附近，对布线造成了极大的麻烦。

一些开源方案没有在此处设置滤波电容，虽然对一般功能无伤大雅，但从鲁棒性角度上应是不妥。

### 芯片中心接地引脚

对这类中间引脚没有相关处理经验，且我使用的ESP32-WROOM-32E模组与官方V4方案中模组封装存在差别，不清楚处理方式是否妥当。

当前V1.0对中间9个接地引脚进行铺铜接地，同时在四周打了4个过孔便于散热。目前尚不清楚该方法是否妥当，及是否应打更多的过孔。

### PCB布线

官方方案对大部分芯片引脚过孔到底板进行连接，从走线效果上看，应该由于V1.0在顶层走线的策略。

关于信号线、电源线和元器件底层之间的相互影响，我缺乏相关的知识储备，仅知晓它们会造成影响，但安全距离相关信息缺乏。官方方案中采用了一些从元器件底层走线的方式优化布局，而我无法使用这一策略。

另外，0805封装对密集布局影响较大。



